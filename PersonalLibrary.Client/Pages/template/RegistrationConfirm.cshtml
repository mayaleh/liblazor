@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@using Microsoft.AspNetCore.Blazor.Services;

@inject IUriHelper UriHelper

@page "/Registration/NewUser"



@functions{

    string UserId;
    string Code;

    protected override Task OnInitAsync()
    {
        this.getUrlParams();

        if(!string.IsNullOrEmpty(UserId) && !string.IsNullOrEmpty(Code))
        {
            //sernd init asynch to confirm account
        }

        return base.OnInitAsync();
    }

    private void getUrlParams()
    {
        var uri = new Uri(UriHelper.GetAbsoluteUri());
        UserId = Microsoft.AspNetCore.WebUtilities.QueryHelpers.ParseQuery(uri.Query).TryGetValue("userId", out var type) ? type.First() : "";
        Code = Microsoft.AspNetCore.WebUtilities.QueryHelpers.ParseQuery(uri.Query).TryGetValue("code", out var typeC) ? typeC.First() : "";
    }
}
